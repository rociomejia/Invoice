@page

@model Invoices.EditModel
@{
}

<h2 class="text-center ab-3">Edit Invoice </h2>
@if (Model.successMessage.Length>0)
{
	<div class="alert alert-success alert-dismissible fade show" role="alert">
		<strong> @Model.successMessage</strong>
		<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
	</div>
}
<form method="post">
	<div class="row g-2 mb-3">
		<div class="col-lg-6">
			<div class="card h-100">
				<div class="card-header">
					Invoice Details

				</div>
				<div class="card-body">
					<div class="row mb-3">
						<label class="col-sm-4 col-form-label">Invoice Id</label>
						<div class="col-sm-8">
							<input class="form-control-plaintext" readonly value="@Model.Invoice.Id">
						</div>
					</div>
					<div class="row mb-3">
						<label class="col-sm-4 col-form-label">Invoice No</label>
						<div class="col-sm-8">
							<input class="form-control" asp-for="Invoicedto.Number">
							<span asp-validation-for="Invoicedto.Number" class="text-danger"></span>
							                          
						</div>
					</div>
					<div class="row mb-3">
						<label class="col-sm-4 col-form-label">Payment Status</label>
						<div class="col-sm-8">
							<select class="form-select" asp-for="Invoicedto.Status">
								<option value="Pending">Pending</option>
								<option value="Paid">Paid</option>
							</select>
							<span asp-validation-for="Invoicedto.Status" class="text-danger"></span>
						</div>
					</div>
					<div class="row mb-3">
						<label class="col-sm-4 col-form-label">Issue Date</label>
						<div class="col-sm-8">
							<input class="form-control" type="date" asp-for="Invoicedto.IssueDate">
							<span asp-validation-for="Invoicedto.IssueDate" class="text-danger"></span>
						</div>
					</div>
					<div class="row">
						<label class="col-sm-4 col-form-label">Due Date</label>
						<div class="col-sm-8">
							<input class="form-control" type="date" asp-for="Invoicedto.DueDate">
							<span asp-validation-for="Invoicedto.DueDate" class="text-danger"></span>
						</div>
					</div>

				</div>
			</div>
		</div>
		<div class="col-lg-6">
			<div class="card-header">
				Client Details
			</div>
			<div class="card-body">
				<div class="row mb-3">
					<label class="col-sm-4 col-form-label">Client</label>
					<div class="col sm-8">
						<input class="form-control" asp-for="Invoicedto.ClientName">
						<span asp-validation-for="Invoicedto.ClientName" class="text-danger"></span>
					</div>
				</div>
				<div class="row mb-3">
					<label class="col-sm-4 col-form-label">Email</label>
					<div class="col sm-8">
						<input class="form-control" asp-for="Invoicedto.Email">
						<span asp-validation-for="Invoicedto.Email" class="text-danger"></span>
					</div>
				</div>
				<div class="row mb-3">
					<label class="col-sm-4 col-form-label">Phone</label>
					<div class="col sm-8">
						<input class="form-control" asp-for="Invoicedto.Phone">
						<span asp-validation-for="Invoicedto.Phone" class="text-danger"></span>
					</div>
				</div>
				<div class="row mb-3">
					<label class="col-sm-4 col-form-label">Address</label>
					<div class="col sm-8">
						<input class="form-control" asp-for="Invoicedto.Address">
						<span asp-validation-for="Invoicedto.Address" class="text-danger"></span>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="card mb-3">
		<div class="card-header">
			Service Details
		</div>
		<div class="card-body">
			<div class="row g-2">
				<div class="col lg-6">
					<label class="col-sm-4 col-form-label">Service</label>
					<div class="col sm-8">
						<input class="form-control" asp-for="Invoicedto.Service">
						<span asp-validation-for="Invoicedto.Service" class="text-danger"></span>
					</div>
				</div>

				<div class="col-lg-2 col-sm-4">
					<label class="form-label">Quantity</label>

					<input class="form-control" asp-for="Invoicedto.Quantity" id="quantityInput" oninput="updateTotalPrice()">
					<span asp-validation-for="Invoicedto.Quantity" class="text-danger"></span>

				</div>


				<div class="col-lg-2 col-sm-4">
					<label class="form-label">Unit price</label>

					<input class="form-control" asp-for="Invoicedto.UnitPrice" id="unitPriceInput" oninput="updateTotalPrice()">
					<span asp-validation-for="Invoicedto.UnitPrice" class="text-danger"></span>

				</div>

				<div class="col-lg-2 col-sm-4">
					<label class="form-label">Total Price</label>
					<input class="form-control" disabled id="totalpriceInput">
				</div>


			</div>
		</div>
	</div>

	<button type="submit" class="btn btn-primary me-2">Submit</button>
	<a class="btn btn-outline-primary" asp-asp-page="/invoices/index" role="button">Cancel</a>

</form>
<script>
	function updateTotalPrice() {
		let quantity = document.getElementById("quantityInput").value;
		let unitprice = document.getElementById("unitPriceInput").value;
		if (isNaN(quantity) || isNaN(unitprice)) {
			document.getElementById("totalpriceInput").value = "0";
		}
		else {
			let totalprice = quantity * unitprice;
			document.getElementById("totalpriceInput").value = totalprice;

		}
	}
	updateTotalPrice();
</script>